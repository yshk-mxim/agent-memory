# Default configuration for Semantic server
# All settings can be overridden via:
# - CLI arguments (highest priority)
# - Environment variables (SEMANTIC_*)
# - .env file
# - This file (lowest priority)

[mlx]
model_id = "mlx-community/gemma-3-12b-it-4bit"
max_batch_size = 5
prefill_step_size = 512
kv_bits = 8  # 8-bit quantization (50% memory reduction), null for float16
kv_group_size = 64
block_tokens = 256
cache_budget_mb = 4096

[agent]
max_agents_in_memory = 5
cache_dir = "~/.semantic/caches"
batch_window_ms = 10
eviction_policy = "lru"  # Options: lru, lru_3tier (upgrade if profiling shows need)

[server]
host = "127.0.0.1"  # localhost-only by default (security)
port = 8000
allow_remote = false  # Set to true or use --allow-remote to bind 0.0.0.0
shutdown_timeout_seconds = 30.0
worker_count = 1  # Single worker (one model instance per process)

[logging]
level = "INFO"  # DEBUG, INFO, WARNING, ERROR
format = "json"  # json, console
output = "stdout"  # stdout, file
file_path = "~/.semantic/logs/semantic.log"

[metrics]
enabled = true
port = 9090  # Prometheus metrics on separate port
include_agent_id_label = false  # Privacy: exclude agent_id from metrics by default

[health]
startup_timeout_seconds = 60.0  # Max time for model loading
readiness_check_interval_seconds = 5.0
